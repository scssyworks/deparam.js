{"version":3,"file":"deparam.esm.js","sources":["../../node_modules/is-number/index.js","../../node_modules/is-object/index.js","../../src/deparam.js"],"sourcesContent":["/*!\n * is-number <https://github.com/jonschlinkert/is-number>\n *\n * Copyright (c) 2014-present, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function(num) {\n  if (typeof num === 'number') {\n    return num - num === 0;\n  }\n  if (typeof num === 'string' && num.trim() !== '') {\n    return Number.isFinite ? Number.isFinite(+num) : isFinite(+num);\n  }\n  return false;\n};\n","'use strict';\n\nmodule.exports = function isObject(x) {\n\treturn typeof x === 'object' && x !== null;\n};\n","import isNumber from \"is-number\";\nimport isObject from \"is-object\";\n\n// Definition of undefined\nconst UNDEF = void 0; // Results to undefined\n\n// Typeof undefined\nconst TYPEOF_UNDEF = typeof UNDEF;\n\n// Typeof string\nconst TYPEOF_STR = typeof \"\";\n\n// location var\nconst loc = typeof window !== TYPEOF_UNDEF ? window.location : null;\n\n// Shorthand for built-ins\nconst isArr = Array.isArray;\n\n/**\n * Checks if current key is safe\n * @param {string} key Current key\n * @returns {boolean}\n */\nfunction isSafe(key) {\n  return [\"__proto__\", \"prototype\"].indexOf(key) === -1;\n}\n\n/**\n * Shorthand for Object.prototype.hasOwnProperty\n * @param {any} obj Any object\n * @param {string} key key\n * @returns {boolean} true or false if object has the property\n */\nfunction hasOwn(obj, key) {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\n\n/**\n * Returns true of input query string is complex\n * @param {string} q Query string\n * @returns {boolean} true or false\n */\nfunction ifComplex(q) {\n  return /\\[/.test(q);\n}\n\n/**\n * Returns an object without a prototype\n * @returns {{[key in string|number]: any}} Object without __proto__\n */\nfunction obNull() {\n  return Object.create(null);\n}\n\n/**\n * Returns a parsed query object\n * @param {string} qs Query string\n * @param {boolean} coerce Coerce values\n * @returns {{[key in string|number]: any}} Query object\n */\nfunction lib(qs, coerce) {\n  if (typeof qs !== TYPEOF_STR) {\n    qs = loc ? loc.search : \"\";\n  }\n  qs = qs.substring(qs.charAt(0) === \"?\");\n  const queryObject = obNull();\n  if (qs) {\n    qs.split(\"&\").forEach((qq) => {\n      const qArr = qq.split(\"=\").map((part) => decodeURIComponent(part));\n      if (ifComplex(qArr[0])) {\n        complex.apply(this, [].concat(qArr).concat([queryObject, coerce]));\n      } else {\n        simple.apply(this, [qArr, queryObject, false, coerce]);\n      }\n    });\n  }\n  return queryObject;\n}\n\n/**\n * Converts an array to equivalent object\n * @param {any[]} arr Any array\n * @returns {any} Any object\n */\nfunction toObject(arr) {\n  var convertedObj = obNull();\n  if (isArr(arr)) {\n    arr.forEach((value, index) => {\n      convertedObj[index] = value;\n    });\n  }\n  return convertedObj;\n}\n\n/**\n * Converts array to an object if required\n * @param {any} ob Any object\n * @param {booleab} isNextNumber Test for next key\n * @returns {any} Any object\n */\nfunction resolve(ob, isNextNumber) {\n  if (typeof ob === TYPEOF_UNDEF) return isNextNumber ? [] : obNull();\n  return isNextNumber ? ob : toObject(ob);\n}\n\n/**\n * Resolves the target object for next iteration\n * @param {any} ob current reference object\n * @param {string} nextProp reference property in current object\n * @returns {any} Resolved object for next iteration\n */\nfunction resolveObj(ob, nextProp) {\n  if (isObject(ob) && !isArr(ob)) return { ob };\n  if (isArr(ob) || typeof ob === TYPEOF_UNDEF)\n    return { ob: resolve(ob, isNumber(nextProp)) };\n  return { ob: [ob], push: ob !== null };\n}\n\n/**\n * Handles complex query parameters\n * @param {string} key Query key\n * @param {string} value Query value\n * @param {Object} obj Query object\n * @returns {void}\n */\nfunction complex(key, value, obj, doCoerce) {\n  const match = key.match(/([^\\[]+)\\[([^\\[]*)\\]/) || [];\n  if (match.length === 3) {\n    let prop = match[1];\n    let nextProp = match[2];\n    key = key.replace(/\\[([^\\[]*)\\]/, \"\");\n    if (ifComplex(key)) {\n      if (nextProp === \"\") nextProp = \"0\";\n      key = key.replace(/[^\\[]+/, nextProp);\n      complex(\n        key,\n        value,\n        (obj[prop] = resolveObj(obj[prop], nextProp).ob),\n        doCoerce\n      );\n    } else if (nextProp) {\n      if (isSafe(prop) && isSafe(nextProp)) {\n        const { ob, push } = resolveObj(obj[prop], nextProp);\n        obj[prop] = ob;\n        const nextOb = push ? obNull() : obj[prop];\n        nextOb[nextProp] = coerce(value, !doCoerce);\n        if (push) {\n          obj[prop].push(nextOb);\n        }\n      }\n    } else {\n      simple([match[1], value], obj, true, doCoerce);\n    }\n  }\n}\n\n/**\n * Handles simple query\n * @param {array} qArr Query list\n * @param {Object} queryObject Query object\n * @param {boolean} toArray Test for conversion to array\n * @returns {void}\n */\nfunction simple(qArr, queryObject, toArray, doCoerce) {\n  const key = qArr[0];\n  let value = qArr[1];\n  if (isSafe(key)) {\n    value = coerce(value, !doCoerce);\n    if (hasOwn(queryObject, key)) {\n      queryObject[key] = isArr(queryObject[key])\n        ? queryObject[key]\n        : [queryObject[key]];\n      queryObject[key].push(value);\n    } else {\n      queryObject[key] = toArray ? [value] : value;\n    }\n  }\n}\n\n/**\n * Converts input value to their appropriate types\n * @param {any} value Input value\n * @param {boolean} skip Test for skipping coercion\n * @returns {any} Coerced value\n */\nfunction coerce(value, skip) {\n  // eslint-disable-next-line\n  if (value == null) {\n    return \"\";\n  }\n  if (skip || typeof value !== TYPEOF_STR) {\n    return value;\n  }\n  value = value.trim();\n  if (isNumber(value)) {\n    return +value;\n  }\n  switch (value) {\n    case \"null\":\n      return null;\n    case TYPEOF_UNDEF:\n      return UNDEF;\n    case \"true\":\n      return true;\n    case \"false\":\n      return false;\n    case \"NaN\":\n      return NaN;\n    default:\n      return value;\n  }\n}\n\nexport default lib;\nexport { isNumber, isObject };\n"],"names":["UNDEF","TYPEOF_UNDEF","TYPEOF_STR","loc","window","location","isArr","Array","isArray","isSafe","key","indexOf","hasOwn","obj","Object","prototype","hasOwnProperty","call","ifComplex","q","test","obNull","create","lib","qs","coerce","search","substring","charAt","queryObject","split","forEach","qq","qArr","map","part","decodeURIComponent","complex","apply","concat","simple","toObject","arr","convertedObj","value","index","resolve","ob","isNextNumber","resolveObj","nextProp","isObject","isNumber","push","doCoerce","match","length","prop","replace","nextOb","toArray","skip","trim","NaN"],"mappings":"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"}