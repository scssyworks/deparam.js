{"version":3,"file":"deparam.esm.js","sources":["../../node_modules/is-number/index.js","../../src/deparam.js"],"sourcesContent":["/*!\n * is-number <https://github.com/jonschlinkert/is-number>\n *\n * Copyright (c) 2014-present, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function(num) {\n  if (typeof num === 'number') {\n    return num - num === 0;\n  }\n  if (typeof num === 'string' && num.trim() !== '') {\n    return Number.isFinite ? Number.isFinite(+num) : isFinite(+num);\n  }\n  return false;\n};\n","import isNumber from 'is-number';\n\n// Definition of undefined\nconst UNDEF = void 0; // Results to undefined\n\n// Typeof undefined\nconst TYPEOF_UNDEF = typeof UNDEF;\n\n// Typeof string\nconst TYPEOF_STR = typeof '';\n\n// Vars\nconst isBrowser = typeof window !== TYPEOF_UNDEF;\n\n// location var\nconst loc = isBrowser ? window.location : null;\n\n// Shorthand for built-ins\nconst isArr = Array.isArray;\n\n/**\n * Shorthand for Object.prototype.hasOwnProperty\n * @param {any} obj Any object\n * @param {string} key key\n * @returns {boolean} true or false if object has the property\n */\nfunction hasOwn(obj, key) {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\n\n/**\n * Returns true of input is an object and not an array\n * @param {any} key Checks if input is an object and not an array\n * @returns {boolean} true or false\n */\nfunction isObject(key) {\n  return typeof key === 'object' && key !== null && !isArr(key);\n}\n\n/**\n * Returns true of input query string is complex\n * @param {string} q Query string\n * @returns {boolean} true or false\n */\nfunction ifComplex(q) {\n  return /\\[/.test(q);\n}\n\n/**\n * Returns an object without a prototype\n * @returns {{[key in string|number]: any}} Object without __proto__\n */\nfunction obNull() {\n  return Object.create(null);\n}\n\n/**\n * Returns a parsed query object\n * @param {string} qs Query string\n * @param {boolean} coerce Coerce values\n * @returns {{[key in string|number]: any}} Query object\n */\nfunction lib(qs, coerce) {\n  if (isBrowser && typeof qs !== TYPEOF_STR) {\n    qs = loc.search;\n  }\n  qs = qs.substring(qs.charAt(0) === '?');\n  const queryParamList = qs.split('&');\n  const queryObject = obNull();\n  if (qs) {\n    queryParamList.forEach((qq) => {\n      const qArr = qq.split('=').map((part) => decodeURIComponent(part));\n      if (ifComplex(qArr[0])) {\n        complex.apply(this, [].concat(qArr).concat([queryObject, coerce]));\n      } else {\n        simple.apply(this, [qArr, queryObject, false, coerce]);\n      }\n    });\n  }\n  return queryObject;\n}\n\n/**\n * Converts an array to equivalent object\n * @param {any[]} arr Any array\n * @returns {any} Any object\n */\nfunction toObject(arr) {\n  var convertedObj = obNull();\n  if (isArr(arr)) {\n    arr.forEach((value, index) => {\n      convertedObj[index] = value;\n    });\n  }\n  return convertedObj;\n}\n\n/**\n * Converts array to an object if required\n * @param {any} ob Any object\n * @param {booleab} isNextNumber Test for next key\n * @returns {any} Any object\n */\nfunction resolve(ob, isNextNumber) {\n  if (typeof ob === TYPEOF_UNDEF) return isNextNumber ? [] : obNull();\n  return isNextNumber ? ob : toObject(ob);\n}\n\n/**\n * Resolves the target object for next iteration\n * @param {any} ob current reference object\n * @param {string} nextProp reference property in current object\n * @returns {any} Resolved object for next iteration\n */\nfunction resolveObj(ob, nextProp) {\n  if (isObject(ob)) return { ob };\n  if (isArr(ob) || typeof ob === TYPEOF_UNDEF)\n    return { ob: resolve(ob, isNumber(nextProp)) };\n  return { ob: [ob], push: ob !== null };\n}\n\n/**\n * Handles complex query parameters\n * @param {string} key Query key\n * @param {string} value Query value\n * @param {Object} obj Query object\n * @returns {void}\n */\nfunction complex(key, value, obj, doCoerce) {\n  const match = key.match(/([^\\[]+)\\[([^\\[]*)\\]/) || [];\n  if (match.length === 3) {\n    let prop = match[1];\n    let nextProp = match[2];\n    key = key.replace(/\\[([^\\[]*)\\]/, '');\n    if (ifComplex(key)) {\n      if (nextProp === '') nextProp = '0';\n      key = key.replace(/[^\\[]+/, nextProp);\n      complex(\n        key,\n        value,\n        (obj[prop] = resolveObj(obj[prop], nextProp).ob),\n        doCoerce\n      );\n    } else if (nextProp) {\n      const { ob, push } = resolveObj(obj[prop], nextProp);\n      obj[prop] = ob;\n      const nextOb = push ? obNull() : obj[prop];\n      nextOb[nextProp] = coerce(value, !doCoerce);\n      if (push) {\n        obj[prop].push(nextOb);\n      }\n    } else {\n      simple([match[1], value], obj, true, doCoerce);\n    }\n  }\n}\n\n/**\n * Handles simple query\n * @param {array} qArr Query list\n * @param {Object} queryObject Query object\n * @param {boolean} toArray Test for conversion to array\n * @returns {void}\n */\nfunction simple(qArr, queryObject, toArray, doCoerce) {\n  let key = qArr[0];\n  let value = qArr[1];\n  value = coerce(value, !doCoerce);\n  if (hasOwn(queryObject, key)) {\n    queryObject[key] = isArr(queryObject[key])\n      ? queryObject[key]\n      : [queryObject[key]];\n    queryObject[key].push(value);\n  } else {\n    queryObject[key] = toArray ? [value] : value;\n  }\n}\n\n/**\n * Converts input value to their appropriate types\n * @param {any} value Input value\n * @param {boolean} skip Test for skipping coercion\n * @returns {any} Coerced value\n */\nfunction coerce(value, skip) {\n  if (value == null) return '';\n  if (skip || typeof value !== TYPEOF_STR) return value;\n  value = value.trim();\n  if (isNumber(value)) return +value;\n  switch (value) {\n    case 'null':\n      return null;\n    case TYPEOF_UNDEF:\n      return UNDEF;\n    case 'true':\n      return true;\n    case 'false':\n      return false;\n    case 'NaN':\n      return NaN;\n    default:\n      return value;\n  }\n}\n\nexport default lib;\n"],"names":["UNDEF","TYPEOF_UNDEF","TYPEOF_STR","isBrowser","window","loc","location","isArr","Array","isArray","hasOwn","obj","key","Object","prototype","hasOwnProperty","call","isObject","ifComplex","q","test","obNull","create","lib","qs","coerce","search","substring","charAt","queryParamList","split","queryObject","forEach","qq","qArr","map","part","decodeURIComponent","complex","apply","concat","simple","toObject","arr","convertedObj","value","index","resolve","ob","isNextNumber","resolveObj","nextProp","isNumber","push","doCoerce","match","length","prop","replace","nextOb","toArray","skip","trim","NaN"],"mappings":"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"}