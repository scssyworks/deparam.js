{"version":3,"file":"deparam.esm.js","sources":["../../node_modules/is-number/index.js","../../src/deparam.js"],"sourcesContent":["/*!\n * is-number <https://github.com/jonschlinkert/is-number>\n *\n * Copyright (c) 2014-present, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function(num) {\n  if (typeof num === 'number') {\n    return num - num === 0;\n  }\n  if (typeof num === 'string' && num.trim() !== '') {\n    return Number.isFinite ? Number.isFinite(+num) : isFinite(+num);\n  }\n  return false;\n};\n","import isNumber from 'is-number';\n\n// Vars\nconst isBrowser = typeof window !== 'undefined';\n\n// Shorthand for built-ins\nconst isArr = Array.isArray;\n\nfunction hasOwn(obj, key) {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\n\n/**\n * Checks if key is a true object\n * @param {*} key Any type of value\n */\nfunction isObject(key) {\n  return typeof key === 'object' && key !== null && !isArr(key);\n}\n\n/**\n * Checks if query parameter key is a complex notation\n * @param {string} q\n */\nfunction ifComplex(q) {\n  return /\\[/.test(q);\n}\n\n/**\n * Creates an object without prototype link\n * @returns Object without prototype link\n */\nfunction obNull() {\n  return Object.create(null);\n}\n\n/**\n * Converts query string to JavaScript object\n * @param {string} qs query string argument (defaults to url query string)\n */\nfunction lib(qs = isBrowser ? location.search : '', coerce = false) {\n  qs = qs.substring(qs.charAt(0) === '?');\n  const queryParamList = qs.split('&');\n  const queryObject = obNull();\n  if (qs) {\n    queryParamList.forEach((qq) => {\n      const qArr = qq.split('=').map((part) => decodeURIComponent(part));\n      if (ifComplex(qArr[0])) {\n        complex.apply(this, [].concat(qArr).concat([queryObject, coerce]));\n      } else {\n        simple.apply(this, [qArr, queryObject, false, coerce]);\n      }\n    });\n  }\n  return queryObject;\n}\n\n/**\n * Converts an array to an object\n * @param {array} arr\n */\nfunction toObject(arr) {\n  var convertedObj = obNull();\n  if (isArr(arr)) {\n    arr.forEach((value, index) => {\n      convertedObj[index] = value;\n    });\n  }\n  return convertedObj;\n}\n\n/**\n * Resolves an array to object if required\n * @param {array} ob An array object\n * @param {boolean} isNumber flag to test if next key is number\n */\nfunction resolve(ob, isNextNumber) {\n  if (typeof ob === 'undefined') return isNextNumber ? [] : obNull();\n  return isNextNumber ? ob : toObject(ob);\n}\n\n/**\n * Resolves the target object for next iteration\n * @param {Object} ob current reference object\n * @param {string} nextProp reference property in current object\n */\nfunction resolveObj(ob, nextProp) {\n  if (isObject(ob)) return { ob };\n  if (isArr(ob) || typeof ob === 'undefined')\n    return { ob: resolve(ob, isNumber(nextProp)) };\n  return { ob: [ob], push: ob !== null };\n}\n\n/**\n * Handles complex query parameters\n * @param {string} key\n * @param {string} value\n * @param {Object} obj\n */\nfunction complex(key, value, obj, doCoerce) {\n  const match = key.match(/([^\\[]+)\\[([^\\[]*)\\]/) || [];\n  if (match.length === 3) {\n    let prop = match[1];\n    let nextProp = match[2];\n    key = key.replace(/\\[([^\\[]*)\\]/, '');\n    if (ifComplex(key)) {\n      if (nextProp === '') nextProp = '0';\n      key = key.replace(/[^\\[]+/, nextProp);\n      complex(\n        key,\n        value,\n        (obj[prop] = resolveObj(obj[prop], nextProp).ob),\n        doCoerce\n      );\n    } else if (nextProp) {\n      const { ob, push } = resolveObj(obj[prop], nextProp);\n      obj[prop] = ob;\n      const nextOb = push ? obNull() : obj[prop];\n      nextOb[nextProp] = coerce(value, !doCoerce);\n      if (push) {\n        obj[prop].push(nextOb);\n      }\n    } else {\n      simple([match[1], value], obj, true, doCoerce);\n    }\n  }\n}\n\n/**\n * Handles simple query\n * @param {array} qArr\n * @param {Object} queryObject\n * @param {boolean} toArray\n */\nfunction simple(qArr, queryObject, toArray, doCoerce) {\n  let key = qArr[0];\n  let value = qArr[1];\n  value = coerce(value, !doCoerce);\n  if (hasOwn(queryObject, key)) {\n    queryObject[key] = isArr(queryObject[key])\n      ? queryObject[key]\n      : [queryObject[key]];\n    queryObject[key].push(value);\n  } else {\n    queryObject[key] = toArray ? [value] : value;\n  }\n}\n\n/**\n * Restores values to their original type\n * @param {string} value undefined or string value\n */\nfunction coerce(value, skip) {\n  if (value == null) return '';\n  if (skip || typeof value !== 'string') return value;\n  value = value.trim();\n  if (isNumber(value)) return +value;\n  switch (value) {\n    case 'null':\n      return null;\n    case 'undefined':\n      return undefined;\n    case 'true':\n      return true;\n    case 'false':\n      return false;\n    case 'NaN':\n      return NaN;\n    default:\n      return value;\n  }\n}\n\nexport default lib;\n"],"names":["isBrowser","window","isArr","Array","isArray","hasOwn","obj","key","Object","prototype","hasOwnProperty","call","isObject","ifComplex","q","test","obNull","create","lib","qs","location","search","coerce","substring","charAt","queryParamList","split","queryObject","forEach","qq","qArr","map","part","decodeURIComponent","complex","apply","concat","simple","toObject","arr","convertedObj","value","index","resolve","ob","isNextNumber","resolveObj","nextProp","isNumber","push","doCoerce","match","length","prop","replace","nextOb","toArray","skip","trim","undefined","NaN"],"mappings":"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"}