{"version":3,"file":"deparam.js","sources":["../../node_modules/is-number/index.js","../../node_modules/is-object/index.js","../../src/deparam.js"],"sourcesContent":["/*!\n * is-number <https://github.com/jonschlinkert/is-number>\n *\n * Copyright (c) 2014-present, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function(num) {\n  if (typeof num === 'number') {\n    return num - num === 0;\n  }\n  if (typeof num === 'string' && num.trim() !== '') {\n    return Number.isFinite ? Number.isFinite(+num) : isFinite(+num);\n  }\n  return false;\n};\n","'use strict';\n\nmodule.exports = function isObject(x) {\n\treturn typeof x === 'object' && x !== null;\n};\n","import isNumber from \"is-number\";\nimport isObject from \"is-object\";\n\n// Definition of undefined\nconst UNDEF = void 0; // Results to undefined\n\n// location var\nconst loc = typeof document !== typeof UNDEF ? document.location : null;\n\n// Shorthand for built-ins\nconst isArr = Array.isArray;\n\n/**\n * Checks if current key is safe\n * @param {string} key Current key\n * @returns {boolean}\n */\nfunction isSafe(key) {\n\treturn [\"__proto__\", \"prototype\"].indexOf(key) === -1;\n}\n\n/**\n * Shorthand for Object.prototype.hasOwnProperty\n * @param {any} obj Any object\n * @param {string} key key\n * @returns {boolean} true or false if object has the property\n */\nfunction hasOwn(obj, key) {\n\treturn Object.prototype.hasOwnProperty.call(obj, key);\n}\n\n/**\n * Returns true of input query string is complex\n * @param {string} q Query string\n * @returns {boolean} true or false\n */\nfunction ifComplex(q) {\n\treturn /\\[/.test(q);\n}\n\n/**\n * Returns an object without a prototype\n * @returns {{[key in string|number]: any}} Object without __proto__\n */\nfunction createSafeObject() {\n\treturn Object.create(null);\n}\n\n/**\n * Returns a parsed query object\n * @param {string} qs Query string\n * @param {boolean} coerce Coerce values\n * @returns {{[key in string|number]: any}} Query object\n */\nfunction lib(qs, coerce) {\n\tif (typeof qs !== typeof \"\") {\n\t\tqs = loc ? loc.search : \"\";\n\t}\n\tqs = qs.substring(qs.charAt(0) === \"?\");\n\tconst queryObject = createSafeObject();\n\tif (qs) {\n\t\tqs.split(\"&\").forEach((qq) => {\n\t\t\tconst qArr = qq.split(\"=\").map((part) => decodeURIComponent(part));\n\t\t\tif (ifComplex(qArr[0])) {\n\t\t\t\tcomplex.apply(this, [].concat(qArr).concat([queryObject, coerce]));\n\t\t\t} else {\n\t\t\t\tsimple.apply(this, [qArr, queryObject, false, coerce]);\n\t\t\t}\n\t\t});\n\t}\n\treturn queryObject;\n}\n\n/**\n * Converts an array to equivalent object\n * @param {any[]} arr Any array\n * @returns {any} Any object\n */\nfunction toObject(arr) {\n\tvar convertedObj = createSafeObject();\n\tif (isArr(arr)) {\n\t\tarr.forEach((value, index) => {\n\t\t\tconvertedObj[index] = value;\n\t\t});\n\t}\n\treturn convertedObj;\n}\n\n/**\n * Converts array to an object if required\n * @param {any} ob Any object\n * @param {booleab} isNextNumber Test for next key\n * @returns {any} Any object\n */\nfunction resolve(ob, isNextNumber) {\n\tif (typeof ob === typeof UNDEF) return isNextNumber ? [] : createSafeObject();\n\treturn isNextNumber ? ob : toObject(ob);\n}\n\n/**\n * Resolves the target object for next iteration\n * @param {any} ob current reference object\n * @param {string} nextProp reference property in current object\n * @returns {any} Resolved object for next iteration\n */\nfunction resolveObj(ob, nextProp) {\n\tif (isObject(ob) && !isArr(ob)) return { ob };\n\tif (isArr(ob) || typeof ob === typeof UNDEF)\n\t\treturn { ob: resolve(ob, isNumber(nextProp)) };\n\treturn { ob: [ob], push: ob !== null };\n}\n\n/**\n * Handles complex query parameters\n * @param {string} key Query key\n * @param {string} value Query value\n * @param {Object} obj Query object\n * @returns {void}\n */\nfunction complex(key, value, obj, doCoerce) {\n\tconst match = key.match(/([^\\[]+)\\[([^\\[]*)\\]/) || [];\n\tif (match.length === 3) {\n\t\tlet prop = match[1];\n\t\tlet nextProp = match[2];\n\t\tkey = key.replace(/\\[([^\\[]*)\\]/, \"\");\n\t\tif (ifComplex(key)) {\n\t\t\tif (nextProp === \"\") nextProp = \"0\";\n\t\t\tkey = key.replace(/[^\\[]+/, nextProp);\n\t\t\tcomplex(\n\t\t\t\tkey,\n\t\t\t\tvalue,\n\t\t\t\t(obj[prop] = resolveObj(obj[prop], nextProp).ob),\n\t\t\t\tdoCoerce,\n\t\t\t);\n\t\t} else if (nextProp) {\n\t\t\tif (isSafe(prop) && isSafe(nextProp)) {\n\t\t\t\tconst { ob, push } = resolveObj(obj[prop], nextProp);\n\t\t\t\tobj[prop] = ob;\n\t\t\t\tconst nextOb = push ? createSafeObject() : obj[prop];\n\t\t\t\tnextOb[nextProp] = coerce(value, !doCoerce);\n\t\t\t\tif (push) {\n\t\t\t\t\tobj[prop].push(nextOb);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tsimple([match[1], value], obj, true, doCoerce);\n\t\t}\n\t}\n}\n\n/**\n * Handles simple query\n * @param {array} qArr Query list\n * @param {Object} queryObject Query object\n * @param {boolean} toArray Test for conversion to array\n * @returns {void}\n */\nfunction simple(qArr, queryObject, toArray, doCoerce) {\n\tconst key = qArr[0];\n\tlet value = qArr[1];\n\tif (isSafe(key)) {\n\t\tvalue = coerce(value, !doCoerce);\n\t\tif (hasOwn(queryObject, key)) {\n\t\t\tqueryObject[key] = isArr(queryObject[key])\n\t\t\t\t? queryObject[key]\n\t\t\t\t: [queryObject[key]];\n\t\t\tqueryObject[key].push(value);\n\t\t} else {\n\t\t\tqueryObject[key] = toArray ? [value] : value;\n\t\t}\n\t}\n}\n\n/**\n * Converts input value to their appropriate types\n * @param {any} value Input value\n * @param {boolean} skip Test for skipping coercion\n * @returns {any} Coerced value\n */\nfunction coerce(value, skip) {\n\t// eslint-disable-next-line\n\tif (value == null) {\n\t\treturn \"\";\n\t}\n\tif (skip || typeof value !== typeof \"\") {\n\t\treturn value;\n\t}\n\tvalue = value.trim();\n\tif (isNumber(value)) {\n\t\treturn +value;\n\t}\n\tswitch (value) {\n\t\tcase \"null\":\n\t\t\treturn null;\n\t\tcase typeof UNDEF:\n\t\t\treturn UNDEF;\n\t\tcase \"true\":\n\t\t\treturn true;\n\t\tcase \"false\":\n\t\t\treturn false;\n\t\tcase \"NaN\":\n\t\t\treturn NaN;\n\t\tdefault:\n\t\t\treturn value;\n\t}\n}\n\nexport default lib;\nexport { isNumber, isObject };\n"],"names":["UNDEF","loc","document","_typeof","location","isArr","Array","isArray","isSafe","key","indexOf","hasOwn","obj","Object","prototype","hasOwnProperty","call","ifComplex","q","test","createSafeObject","create","lib","qs","coerce","_this","search","substring","charAt","queryObject","split","forEach","qq","qArr","map","part","decodeURIComponent","complex","apply","concat","simple","toObject","arr","convertedObj","value","index","resolve","ob","isNextNumber","resolveObj","nextProp","isObject","isNumber","push","doCoerce","match","length","prop","replace","_resolveObj","nextOb","toArray","skip","trim","NaN"],"mappings":"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","x_google_ignoreList":[0,1]}