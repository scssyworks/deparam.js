{"version":3,"file":"deparam.js","sources":["../../node_modules/is-number/index.js","../../node_modules/is-object/index.js","../../src/deparam.js"],"sourcesContent":["/*!\n * is-number <https://github.com/jonschlinkert/is-number>\n *\n * Copyright (c) 2014-present, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function(num) {\n  if (typeof num === 'number') {\n    return num - num === 0;\n  }\n  if (typeof num === 'string' && num.trim() !== '') {\n    return Number.isFinite ? Number.isFinite(+num) : isFinite(+num);\n  }\n  return false;\n};\n","'use strict';\n\nmodule.exports = function isObject(x) {\n\treturn typeof x === 'object' && x !== null;\n};\n","import isNumber from 'is-number';\nimport isObject from 'is-object';\n\n// Definition of undefined\nconst UNDEF = void 0; // Results to undefined\n\n// Typeof undefined\nconst TYPEOF_UNDEF = typeof UNDEF;\n\n// Typeof string\nconst TYPEOF_STR = typeof '';\n\n// location var\nconst loc = typeof window !== TYPEOF_UNDEF ? window.location : null;\n\n// Shorthand for built-ins\nconst isArr = Array.isArray;\n\n/**\n * Checks if current key is safe\n * @param {string} key Current key\n * @returns {boolean}\n */\nfunction isSafe(key) {\n  return ['__proto__', 'prototype'].indexOf(key) === -1;\n}\n\n/**\n * Shorthand for Object.prototype.hasOwnProperty\n * @param {any} obj Any object\n * @param {string} key key\n * @returns {boolean} true or false if object has the property\n */\nfunction hasOwn(obj, key) {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\n\n/**\n * Returns true of input query string is complex\n * @param {string} q Query string\n * @returns {boolean} true or false\n */\nfunction ifComplex(q) {\n  return /\\[/.test(q);\n}\n\n/**\n * Returns an object without a prototype\n * @returns {{[key in string|number]: any}} Object without __proto__\n */\nfunction obNull() {\n  return Object.create(null);\n}\n\n/**\n * Returns a parsed query object\n * @param {string} qs Query string\n * @param {boolean} coerce Coerce values\n * @returns {{[key in string|number]: any}} Query object\n */\nfunction lib(qs, coerce) {\n  if (typeof qs !== TYPEOF_STR) {\n    qs = loc ? loc.search : '';\n  }\n  qs = qs.substring(qs.charAt(0) === '?');\n  const queryObject = obNull();\n  if (qs) {\n    qs.split('&').forEach((qq) => {\n      const qArr = qq.split('=').map((part) => decodeURIComponent(part));\n      if (ifComplex(qArr[0])) {\n        complex.apply(this, [].concat(qArr).concat([queryObject, coerce]));\n      } else {\n        simple.apply(this, [qArr, queryObject, false, coerce]);\n      }\n    });\n  }\n  return queryObject;\n}\n\n/**\n * Converts an array to equivalent object\n * @param {any[]} arr Any array\n * @returns {any} Any object\n */\nfunction toObject(arr) {\n  var convertedObj = obNull();\n  if (isArr(arr)) {\n    arr.forEach((value, index) => {\n      convertedObj[index] = value;\n    });\n  }\n  return convertedObj;\n}\n\n/**\n * Converts array to an object if required\n * @param {any} ob Any object\n * @param {booleab} isNextNumber Test for next key\n * @returns {any} Any object\n */\nfunction resolve(ob, isNextNumber) {\n  if (typeof ob === TYPEOF_UNDEF) return isNextNumber ? [] : obNull();\n  return isNextNumber ? ob : toObject(ob);\n}\n\n/**\n * Resolves the target object for next iteration\n * @param {any} ob current reference object\n * @param {string} nextProp reference property in current object\n * @returns {any} Resolved object for next iteration\n */\nfunction resolveObj(ob, nextProp) {\n  if (isObject(ob) && !isArr(ob)) return { ob };\n  if (isArr(ob) || typeof ob === TYPEOF_UNDEF)\n    return { ob: resolve(ob, isNumber(nextProp)) };\n  return { ob: [ob], push: ob !== null };\n}\n\n/**\n * Handles complex query parameters\n * @param {string} key Query key\n * @param {string} value Query value\n * @param {Object} obj Query object\n * @returns {void}\n */\nfunction complex(key, value, obj, doCoerce) {\n  const match = key.match(/([^\\[]+)\\[([^\\[]*)\\]/) || [];\n  if (match.length === 3) {\n    let prop = match[1];\n    let nextProp = match[2];\n    key = key.replace(/\\[([^\\[]*)\\]/, '');\n    if (ifComplex(key)) {\n      if (nextProp === '') nextProp = '0';\n      key = key.replace(/[^\\[]+/, nextProp);\n      complex(\n        key,\n        value,\n        (obj[prop] = resolveObj(obj[prop], nextProp).ob),\n        doCoerce\n      );\n    } else if (nextProp) {\n      if (isSafe(prop) && isSafe(nextProp)) {\n        const { ob, push } = resolveObj(obj[prop], nextProp);\n        obj[prop] = ob;\n        const nextOb = push ? obNull() : obj[prop];\n        nextOb[nextProp] = coerce(value, !doCoerce);\n        if (push) {\n          obj[prop].push(nextOb);\n        }\n      }\n    } else {\n      simple([match[1], value], obj, true, doCoerce);\n    }\n  }\n}\n\n/**\n * Handles simple query\n * @param {array} qArr Query list\n * @param {Object} queryObject Query object\n * @param {boolean} toArray Test for conversion to array\n * @returns {void}\n */\nfunction simple(qArr, queryObject, toArray, doCoerce) {\n  const key = qArr[0];\n  let value = qArr[1];\n  if (isSafe(key)) {\n    value = coerce(value, !doCoerce);\n    if (hasOwn(queryObject, key)) {\n      queryObject[key] = isArr(queryObject[key])\n        ? queryObject[key]\n        : [queryObject[key]];\n      queryObject[key].push(value);\n    } else {\n      queryObject[key] = toArray ? [value] : value;\n    }\n  }\n}\n\n/**\n * Converts input value to their appropriate types\n * @param {any} value Input value\n * @param {boolean} skip Test for skipping coercion\n * @returns {any} Coerced value\n */\nfunction coerce(value, skip) {\n  // eslint-disable-next-line\n  if (value == null) {\n    return '';\n  }\n  if (skip || typeof value !== TYPEOF_STR) {\n    return value;\n  }\n  value = value.trim();\n  if (isNumber(value)) {\n    return +value;\n  }\n  switch (value) {\n    case 'null':\n      return null;\n    case TYPEOF_UNDEF:\n      return UNDEF;\n    case 'true':\n      return true;\n    case 'false':\n      return false;\n    case 'NaN':\n      return NaN;\n    default:\n      return value;\n  }\n}\n\nexport default lib;\n"],"names":["UNDEF","TYPEOF_UNDEF","TYPEOF_STR","loc","window","location","isArr","Array","isArray","isSafe","key","indexOf","hasOwn","obj","Object","prototype","hasOwnProperty","call","ifComplex","q","test","obNull","create","lib","qs","coerce","search","substring","charAt","queryObject","split","forEach","qq","qArr","map","part","decodeURIComponent","complex","apply","concat","simple","toObject","arr","convertedObj","value","index","resolve","ob","isNextNumber","resolveObj","nextProp","isObject","isNumber","push","doCoerce","match","length","prop","replace","nextOb","toArray","skip","trim","NaN"],"mappings":"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"}